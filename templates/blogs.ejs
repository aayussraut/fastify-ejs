<%- include('partials/navbar') %>
    <div class="flex h-screen flex-col justify-center items-center">
        <div class="w-1/2 flex flex-col p-2 px-5 items-center shadow-xl">
            <h1 class="text-purple-500 font-bold text-xl mb-2">Blogs</h1>
            <form class="flex flex-col justify-center" action="/blogs" method="post">
                <div class="flex justify-between mb-2">
                    <label for="title">Title</label>
                    <input type="text" name="title" placeholder="Enter title"
                        class="border border-black rounded-lg p-2 px-4" />
                </div>
                <div class="flex justify-between gap-4">
                    <label for="content">Content</label>
                    <textarea name="content" placeholder="Enter Content"
                        class="border border-black rounded-lg p-2"></textarea>
                </div>
                <button type="submit" class=" mt-3 bg-indigo-500 p-2 text-white rounded-lg text-center">
                    Create
                </button>
            </form>
        </div>
        <div class="w-1/2 flex flex-col p-2 px-5 items-center shadow-xl">
            <h1 class="text-purple-500 font-bold text-xl mb-2">All Blogs</h1>
            <% blogs.forEach((blog)=> { %>
                <%= console.log(blog) %>
                    <div class="flex justify-between shadow-md w-full p-2 mb-2">
                        <div>
                            <h1 class="text-lg font-bold text-purple-500">
                                <%= blog.title %>
                            </h1>
                            <p class="text-sm ">
                                <%= blog.content %>
                            </p>
                        </div>

                        <button type="button" class="bg-red-600 p-2 text-white rounded-lg text-center"
                            onclick="blogDelete('<%= blog.blogId %>')">
                            Delete
                        </button>

                    </div>
                    <% }) %>
        </div>
    </div>


    <script>
        function blogDelete(id) {
            fetch(`/blogs/${id}`, {
                method: 'DELETE'
            }).then((res) => {
                window.location.reload();
            })
        }
    </script>
    </div>